{% extends 'base.html.twig' %}

{% block title %}Hello PlannerController!{% endblock %}

{% block body %}


<h1>Shifts</h1>
<ul>
    {% for shift in shifts %}
        <li>{{ shift.name }} {{ shift.start|date("d.m.Y h:i") }} - {{ shift.end|date("d.m.Y h:i") }} 
            <br>
            needs: <br />
            {% for dependency in shift.dependencies %}
              - {{ dependency.number }}x  {{ dependency.resourceGroup }} <br />
            {% endfor %}

        </li>
    {% endfor %}
</ul>


<h1>Resources</h1>
<ul>
    {% for resource in resources %}
        <li>{{ resource.name }} (
   {% for group in resource.resourceGroup %}
   {{ group.name }} 
          {% endfor %}
        )
        
       
    
        </li>
    {% endfor %}
</ul>



    {% for managedShift in managedShifts %}

    <h1>{{ managedShift.getShift().name }} {{ managedShift.getShift().start|date("d.m.Y h:i") }} - {{ managedShift.getShift().end|date("d.m.Y h:i") }} </h1>

    {% if managedShift.isWrongBooked == true %}
        <span style="color:red">Error auf der Schicht ist eine fehlerhafte Einteilung vorhanden</span>

         <h2>Fehlerhafte Einteilung</h2> <br>

        {% for nm in managedShift.getWrongBooked() %} 
          {{nm.openNumber}} {{nm.resourceGroup.name}} 
            {% for shiftWork in nm.shiftWorks %} <br>
               --  {{shiftWork.resource.name}}
            {% endfor %}
       {% endfor %}

    {% endif %}

        <h2>notwendige Einteilung:</h2> <br>
       {% for nm in managedShift.getOpen() %} 
            {{nm.openNumber}} {{nm.resourceGroup.name}} <br>
              {% for shiftWork in nm.shiftWorks %} 
               --  {{shiftWork.resource.name}} bereits gebucht
            {% endfor %}
            <br>
       {% endfor %}


        <h2>gemachte Einteilung:</h2> <br>
       {% for nm in managedShift.getBooked() %} 
            {{nm.openNumber}} {{nm.resourceGroup.name}} 
              {% for shiftWork in nm.shiftWorks %} <br>
               --  {{shiftWork.resource.name}} <br>
            {% endfor %}
       {% endfor %}

        <h2>Abgeschlossene Abh√§ngikeiten:</h2> <br>
       {% for nm in managedShift.getSuccessfullDepenendcies() %} 
            {{nm.openNumber}} {{nm.resourceGroup.name}} <br>
              {% for shiftWork in nm.shiftWorks %} 
               --  {{shiftWork.resource.name}} <br>
            {% endfor %}
       {% endfor %}

      

    {% endfor %}


{% endblock %}
